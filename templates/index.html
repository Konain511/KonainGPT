<!DOCTYPE html>
<html>

<head>
    <title>KonainGPT</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <div class="sidebar">
        <div class="logo">KonainGPT</div>
        <a href="/new" class="new-chat">+ New Chat</a>

        <div class="history">
            {% for chat in chats %}
            <div class="history-row {% if chat.id == current_id %}active{% endif %}">
                <a href="/?cid={{ chat.id }}">{{ chat.title }}</a>
                <a href="{{ url_for('delete_chat', cid=chat.id) }}" onclick="return confirm('Delete this chat?')">
                    ğŸ—‘ï¸
                </a>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="main">
        <div class="chat-area">
            {% for msg in messages %}
            <div class="bubble {{ msg.role }}">{{ msg.content }}</div>
            {% endfor %}
        </div>
        {% if doc_status == "uploading" %}
        <div class="doc-status uploading">
            â³ Uploading & processing documentâ€¦
        </div>

        {% elif doc_status == "ready" %}
        <div class="doc-status ready">
            âœ… Document loaded: <strong>{{ doc_name }}</strong>
        </div>

        {% elif doc_status == "error" %}
        <div class="doc-status error">
            âŒ Document upload failed. {{ doc_error }}
        </div>
        {% endif %}

        <form class="input-bar" action="/chat" method="post" enctype="multipart/form-data">
            <input type="hidden" name="conversation_id" value="{{ current_id }}">
            <label class="attach">ğŸ“<input type="file" name="file" hidden></label>
            <input type="text" name="query" placeholder="Message KonainGPT" required>
            <button>â¤</button>
        </form>
    </div>

</body>

</html>
